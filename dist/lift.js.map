{"version":3,"sources":["../src/lift.js"],"names":["isFunction","func","constructor","call","apply","idFunction","value","isNone","undefined","Curry","args","length","bind","Monad","modifier","prototype","Object","create","is_monad","unit","monad","run","of","m","get","g","chain","c","map","join","j","toMaybe","Maybe","r","name","lift","l","liftValue","lv","method","Just","valueIsNone","isNothing","n","is","i","or","o","orValue","else","e","orMonad","validFunctions","success","s","successFactory","fail","f","failFactory","isSuccess","isSuccessValue","isFail","ap","validationWithFn","fn","concat","Success","Fail","Valid"],"mappings":"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","file":"lift.js","sourcesContent":["const isFunction =\n  func =>\n    !!(func && func.constructor && func.call && func.apply);\n\nconst idFunction =\n  value =>\n    value;\n\nconst isNone =\n  value =>\n    value === null || value === undefined;\n\nexport const Curry =\n  (func, ...args) =>\n    (args.length >= func.length ? func(...args) : Curry.bind(this, func, ...args));\n\nexport const Monad = (modifier) => {\n  const prototype = Object.create({ is_monad: true });\n  const unit = (value) => {\n    const monad = Object.create(prototype);\n\n    const run = (value, func, args) => (isFunction(func) ? func(value, ...(args || [])) : monad);\n    prototype.bind = (func, args) => run(value, func, args);\n\n    monad.of = (value) => {\n      const m = run(value, idFunction);\n      return m && m.is_monad ? m : unit(m);\n    };\n    monad.get = monad.g = () => value;\n    monad.chain = monad.c = monad.bind;\n    monad.map = monad.m = func => unit(func(value));\n    monad.join = monad.j = () => monad.bind(idFunction);\n    monad.toMaybe = () => Maybe(value);\n    monad.run = monad.r = (func) => { run(value, func); return monad; };\n\n    if (isFunction(modifier)) {\n      modifier(monad, value);\n    }\n    return monad;\n  };\n\n  const apply = (prototype, name, func, unit) => {\n    prototype[name] = func;\n    return unit;\n  };\n\n  unit.lift = unit.l = (name, func) => apply(prototype, name, (...args) => {\n    const m = prototype.bind(func, args);\n    return (m && m.is_monad) ? m : unit(m);\n  }, unit);\n\n  unit.liftValue = unit.lv = (name, func) =>\n    apply(prototype, name, (...args) => prototype.bind(func, args), unit);\n\n  unit.method = unit.m = (name, func) =>\n    apply(prototype, name, func, unit);\n\n  return unit;\n};\n\nexport const Just = Monad();\n\nexport const Maybe = Monad((monad, value) => {\n  const valueIsNone = isNone(value);\n  monad.isNothing = monad.n = () => valueIsNone;\n  monad.is = monad.i = () => !valueIsNone;\n  monad.or = monad.o = orValue => (valueIsNone ? orValue : value);\n  monad.else = monad.e = orMonad => (valueIsNone ? orMonad : monad);\n  monad.bind = valueIsNone ? () => monad : monad.bind;\n  monad.map = valueIsNone ? () => monad : monad.map;\n  const run = monad.run;\n  monad.run = (func) => { (valueIsNone ? () => { } : run)(value, func); return monad; };\n});\n\nconst validFunctions = (monad, value) => {\n  monad.success = monad.s = successFactory;\n  monad.fail = monad.f = failFactory;\n  monad.isSuccess = () => monad.isSuccessValue;\n  monad.isFail = () => !monad.isSuccessValue;\n  monad.ap =\n    validationWithFn =>\n      (monad.isSuccess() ? // eslint-disable-line\n        validationWithFn.map(fn => fn(value)) :\n        (validationWithFn.isFail() ?\n          monad.fail([].concat(value, validationWithFn.fail()))\n          : monad));\n};\n\nconst Success = Monad((monad, value) => {\n  monad.isSuccessValue = true;\n  validFunctions(monad, value);\n});\n\nconst Fail = Monad((monad, value) => {\n  monad.isSuccessValue = false;\n  validFunctions(monad, value);\n});\n\nconst successFactory = value => Success(value);\nconst failFactory = value => Fail(value);\n\nexport const Valid = Monad((monad, value) => {\n  validFunctions(monad, value);\n});\n\nValid.success = Valid.s = successFactory;\nValid.fail = Valid.f = failFactory;\n\n"]}